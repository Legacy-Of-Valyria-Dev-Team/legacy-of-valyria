zz_valyria_magic_potency_learning_modifier = { 
	scope:secondary_actor = { 
		value = { 
			value = learning 
			multiply = 20
			desc = zz_valyria_magic_potency_learning_modifier_desc
			format = "zz_valyria_magic_potency_learning_modifier_format"
		}
	}
}
zz_valyria_magic_potency_secret_knowledge = {
	scope:secondary_actor = { 
		value = 500
		add = zz_valyria_magic_potency_learning_modifier
		multiply = zz_valyria_magic_zz_magister_secrets_modifier
	}
}

zz_valyria_magic_zz_magister_secrets_modifier = {
	value = 1
	if = {
		limit = {
			has_trait = zz_magister
			has_trait_xp = {
				trait = zz_magister
				track = secrets_of_the_higher_mysteries
				value >= 100
			}
		}
		multiply = 16 
	}
	else_if = {
		limit = {
			has_trait = zz_magister
			has_trait_xp = {
				trait = zz_magister
				track = secrets_of_the_higher_mysteries
				value >=75
			}
		}
		multiply = 8 
	}
	else_if = {
		limit = {
			has_trait = zz_magister
			has_trait_xp = {
				trait = zz_magister
				track = secrets_of_the_higher_mysteries
				value >= 49
			}
		}
		multiply = 4 
	}
	else_if = {
		limit = {
			has_trait = zz_magister
			has_trait_xp = {
				trait = zz_magister
				track = secrets_of_the_higher_mysteries
				value >= 24
			}
		}
		multiply = 2 
	}
}


zz_valyria_mana_gain_modifier = {

	value = var:managain
	if = {
		limit = {
			has_trait = born_under_a_red_comet
			has_trait_xp = {
				trait = born_under_a_red_comet
				track = chosen_of_the_heavens
				value >= 100
			}
		}
		multiply = 5
	}
	else_if = {
		limit = {
			has_trait = born_under_a_red_comet
			has_trait_xp = {
				trait = born_under_a_red_comet
				track = chosen_of_the_heavens
				value >= 75
			}
		}
		multiply = 4
	}
	else_if = {
		limit = {
			has_trait = born_under_a_red_comet
			has_trait_xp = {
				trait = born_under_a_red_comet
				track = chosen_of_the_heavens
				value >= 50
			}
		}
		multiply = 3
	}	
	else_if = {
		limit = {
			has_trait = born_under_a_red_comet
			has_trait_xp = {
				trait = born_under_a_red_comet
				track = chosen_of_the_heavens
				value >= 25
			}
		}
		multiply = 2
	}
	else = {
		limit = {
			has_trait = born_under_a_red_comet
		}
		multiply = 1
	}
}



zz_spend_mana  = { 
	value = var:manacost
	multiply = -1 
}

zz_valyria_d10 = {
	value = 0 
	add = { 1 10 }
}

zz_valyria_d100 = { 
	value = 0 
	add = { 1 100 }
}


zz_spell_cast_learning_modifier = { 
	scope:secondary_actor = { 
		value = { 
			value = learning 
		}
	}
}
zz_spellcast_value = { 
	value = { 1 100 }
	add = zz_spell_cast_learning_modifier
	if = { 
		limit = { 
			scope:secondary_actor = {
				has_trait_xp = {
					trait = zz_magister
					track = secrets_of_the_higher_mysteries
					value >= 100
				}
			}
		}
		add = 25 
	}
	else_if = { 
		limit = { 
			scope:secondary_actor = {
				has_trait_xp = {
					trait = zz_magister
					track = secrets_of_the_higher_mysteries
					value >= 75
				}
			}
		}
		add = 20
	}
	else_if = { 
		limit = { 
			scope:secondary_actor = {
				has_trait_xp = {
					trait = zz_magister
					track = secrets_of_the_higher_mysteries
					value >= 50
				}
			}
		}
		add = 15
	}
	else_if = { 
		limit = { 
			scope:secondary_actor = {
				has_trait_xp = {
					trait = zz_magister
					track = secrets_of_the_higher_mysteries
					value >= 25
				}
			}
		}
		add = 10 
	}
	else = { 
		add = 10 
	}
}


