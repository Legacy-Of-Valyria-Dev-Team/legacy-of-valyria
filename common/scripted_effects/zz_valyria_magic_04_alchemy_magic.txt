# Alchemical Magic
zz_valyria_magic_alchemy_magic_01_mysteries_of_growth_effect = {  
	send_interface_message = {
		type = event_generic_neutral
		title = magic_development_boost
		desc = magic_development_boost_text
		left_icon = scope:actor
		right_icon = scope:target
		custom_tooltip = magic_development_boost_text
		scope:target.title_province = {
			county = {
				if = {
					limit = {
						scope:secondary_actor  = {
							any_character_artifact = {
								has_variable = glass_candle
							}
						}
					}
					add_county_modifier = {
						modifier = zz_valyria_magic_province_buff_spell_development_modifier
						years = 20
					}
				}
				else = {
					add_county_modifier = {
						modifier = zz_valyria_magic_province_buff_spell_development_modifier
						years = 10
					}
				}
			}
		}
	}
}

zz_valyria_magic_alchemy_magic_02_mysteries_of_construction_effect = {  
	send_interface_message = {
		type = event_generic_neutral
		title = magic_build_speed_boost
		desc = magic_build_speed_boost_text
		left_icon = scope:actor
		right_icon = scope:target
		custom_tooltip = magic_build_speed_boost_text
		scope:target.title_province = {
			county = {
				if = {
					limit = {
						scope:secondary_actor = {
							any_character_artifact = {
								has_variable = glass_candle
							}
						}
					}
					add_county_modifier = {
						modifier = zz_valyria_magic_province_buff_spell_build_speed_modifier
						years = 20
					}
				}
				else = {
					add_county_modifier = {
						modifier = zz_valyria_magic_province_buff_spell_build_speed_modifier
						years = 10
					}
				}
				
			}
		}
	}
}

zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation_effect = {
	send_interface_message = {
		type = event_generic_neutral
		title = magic_transmutation
		desc = magic_transmutation_text
		left_icon = scope:actor
		right_icon = scope:recipient
		custom_tooltip = magic_transmutation_text
		if = {
			limit = {
				NOT = {
					scope:actor = scope:recipient
				}
			}
			stress_impact = {
				compassionate = medium_stress_impact_loss
				sadistic = minor_stress_gain
				callous = minor_stress_gain
			}
		}
		scope:recipient = {
			if = {
				limit = {
					scope:dynasty_prestige = yes
				}
				scope:recipient = { 
					dynasty = { add_dynasty_prestige = zz_valyria_magic_potency_secret_knowledge}
					
				}
			}
			else_if = {
				limit = {
					scope:prestige= yes
				}
				scope:recipient = { add_prestige = zz_valyria_magic_potency_secret_knowledge } 
			}
			else_if = {
				limit = {
					scope:piety= yes
				}
				scope:recipient = { add_piety = zz_valyria_magic_potency_secret_knowledge } 
			}
			else_if = {
				limit = {
					scope:transmutation = yes
				}
				scope:recipient = { add_gold = zz_valyria_magic_potency_secret_knowledge } 
			}				
			if = {
				limit = {
					NOT = { scope:actor = scope:recipient }
				}
				add_opinion = {
					modifier  = grateful_opinion
					target = scope:actor
					opinion = 70
				}
			}
		}
	}
}

zz_valyria_magic_alchemy_magic_04_mysteries_of_arms_effect = { 
	send_interface_message = {
		type = event_generic_neutral
		title = magic_empowerment_of_arm
		desc = magic_empowerment_of_arm_text
		left_icon = scope:actor
		right_icon = scope:recipient
		custom_tooltip = magic_empowerment_of_arm_text
		if = {
			limit = {
				NOT = {
					scope:actor = scope:recipient
				}
			}
			stress_impact = {
				compassionate = medium_stress_impact_loss
				sadistic = minor_stress_gain
				callous = minor_stress_gain
			}
		}
		scope:recipient = {			
			if = {
				limit = {
					scope:knights_add = yes
				}
				scope:recipient = { add_character_modifier = { modifier = zz_valyria_magic_character_knight_limit_modifier years = -1 }} 
			}
			else_if = {
				limit = {
					scope:knights_bonus = yes
				}
				scope:recipient = { add_character_modifier = { modifier = zz_valyria_magic_character_knight_effectiveness_modifier years = -1 } } 
			}
			else_if = {
				limit = {
					scope:maa_bonus = yes
				}
				scope:recipient = { add_character_modifier = { modifier = zz_valyria_magic_character_maa_limit_modifier years = -1 } } 
			}
			else_if = {
				limit = {
					scope:maa_size_bonus = yes
				}
				scope:recipient = { add_character_modifier = { modifier = zz_valyria_magic_character_maa_size_modifier years = -1 } } 
			}
			else_if = {
				limit = {
					scope:title_maa_bonus = yes
				}
				scope:recipient = { add_character_modifier = { modifier = zz_valyria_magic_character_title_maa_limit_modifier years = -1 } } 
			}
			else_if = {
				limit = {
					scope:title_maa_size_bonus = yes
				}
				scope:recipient = { add_character_modifier = { modifier = zz_valyria_magic_character_title_maa_size_modifier years = -1 } } 
			}
			
			
			if = {
				limit = {
					NOT = { scope:actor = scope:recipient }
				}
				add_opinion = {
					modifier = grateful_opinion
					target = scope:actor
					opinion = 70
				}
			}
		}
	}
}