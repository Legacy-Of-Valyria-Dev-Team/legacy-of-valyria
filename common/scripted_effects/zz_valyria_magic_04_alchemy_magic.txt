


# Alchemical Magic
zz_valyria_magic_alchemy_magic_01_mysteries_of_growth_effect = {  
	send_interface_message = {
		type = event_generic_neutral
		title = zz_valyria_magic_alchemy_magic_01_mysteries_of_growth.t
		desc = zz_valyria_magic_alchemy_magic_01_mysteries_of_growth.desc
		left_icon = scope:actor
		right_icon = scope:target
		custom_tooltip = zz_valyria_magic_alchemy_magic_01_mysteries_of_growth.tt
		scope:target = {
			zz_valyria_magic_apply_province_modifier_effect = { 
				MODIFIER = zz_valyria_magic_alchemy_magic_01_mysteries_of_growth_modifier
				DURATION = 10
				BOOSTED_DURATION = 20
			}
		}
	}
}

zz_valyria_magic_alchemy_magic_02_mysteries_of_construction_effect = {  
	send_interface_message = {
		type = event_generic_neutral
		title = zz_valyria_magic_alchemy_magic_02_mysteries_of_construction.t
		desc = zz_valyria_magic_alchemy_magic_02_mysteries_of_construction.desc
		left_icon = scope:actor
		right_icon = scope:target
		custom_tooltip = zz_valyria_magic_alchemy_magic_02_mysteries_of_construction.tt
		scope:target = {
			zz_valyria_magic_apply_province_modifier_effect = { 
				MODIFIER = zz_valyria_magic_alchemy_magic_02_mysteries_of_construction_modifier
				DURATION = 10
				BOOSTED_DURATION = 20
			}
		}
	}
}

zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation_effect = {
	send_interface_message = {
		type = event_generic_neutral
		title = zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation.t
		desc = zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation.desc
		left_icon = scope:actor
		right_icon = scope:recipient
		custom_tooltip = zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation.tt
		if = {
			limit = {
				NOT = {
					scope:actor = scope:recipient
				}
			}
			stress_impact = {
				compassionate = medium_stress_impact_loss
				sadistic = minor_stress_gain
				callous = minor_stress_gain
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.003 = flag:gold
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.003
			scope:recipient = { 
				add_gold = zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation_option_04 
				domicile ?= { change_provisions = zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation_option_04 }
			}
		} 
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.003 = flag:renown
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.003
			scope:recipient = { 
				dynasty = { add_dynasty_prestige = zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation_option_01}
				
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.003 = flag:prestige
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.003
			scope:recipient = { add_prestige = zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation_option_02 } 
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.003 = flag:piety
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.003
			scope:recipient = { add_piety = zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation_option_03 } 
		}

						
		scope:recipient = {
			if = {
				limit = {
					NOT = { scope:actor = scope:recipient }
				}
				add_opinion = {
					modifier  = grateful_opinion
					target = scope:actor
					opinion = 70
				}
			}
		}
	}
}

zz_valyria_magic_alchemy_magic_04_mysteries_of_arms_effect = { 
	send_interface_message = {
		type = event_generic_neutral
		title = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms.t
		desc = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms.desc
		left_icon = scope:actor
		right_icon = scope:recipient
		custom_tooltip = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms.tt
		if = {
			limit = {
				NOT = {
					scope:actor = scope:recipient
				}
			}
			stress_impact = {
				compassionate = medium_stress_impact_loss
				sadistic = minor_stress_gain
				callous = minor_stress_gain
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.004 = flag:knight_add
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.004
			scope:recipient = {
				zz_valyria_magic_apply_character_modifier_effect = { 
					MODIFIER = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms_option_01_modifier
					DURATION = -1
					BOOSTED_DURATION = -1
				}
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.004 = flag:knight_bonus
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.004
			scope:recipient = {
				zz_valyria_magic_apply_character_modifier_effect = { 
					MODIFIER = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms_option_02_modifer
					DURATION = -1
					BOOSTED_DURATION = -1
				}
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.004 = flag:maa_add
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.004
			scope:recipient = {
				zz_valyria_magic_apply_character_modifier_effect = { 
					MODIFIER = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms_option_03_modifier
					DURATION = -1
					BOOSTED_DURATION = -1
				}
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.004 = flag:maa_size
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.004
			scope:recipient = {
				zz_valyria_magic_apply_character_modifier_effect = { 
					MODIFIER = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms_option_04_modifier
					DURATION = -1
					BOOSTED_DURATION = -1
				}
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.004 = flag:title_maa_add
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.004
			scope:recipient = {
				zz_valyria_magic_apply_character_modifier_effect = { 
					MODIFIER = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms_option_05_modifier
					DURATION = -1
					BOOSTED_DURATION = -1
				}
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.004 = flag:title_maa_size
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.004
			scope:recipient = {
				zz_valyria_magic_apply_character_modifier_effect = { 
					MODIFIER = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms_option_06_modifier
					DURATION = -1
					BOOSTED_DURATION = -1
				}
			}
		}
		scope:recipient = {			
			if = {
				limit = {
					NOT = { scope:actor = scope:recipient }
				}
				add_opinion = {
					modifier = grateful_opinion
					target = scope:actor
					opinion = 70
				}
			}
		}
	}
}


zz_valyria_magic_alchemy_magic_05_mysteries_of_realm_fortification_effect = { 
	send_interface_message = {
		type = event_generic_neutral
		title = zz_valyria_magic_alchemy_magic_05_mysteries_of_realm_fortification.t
		desc = zz_valyria_magic_alchemy_magic_05_mysteries_of_realm_fortification.desc
		left_icon = scope:actor
		right_icon = scope:recipient
		custom_tooltip = zz_valyria_magic_alchemy_magic_05_mysteries_of_realm_fortification.tt
		if = {
			limit = {
				NOT = {
					scope:actor = scope:recipient
				}
			}
			stress_impact = {
				compassionate = medium_stress_impact_loss
				sadistic = minor_stress_gain
				callous = minor_stress_gain
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.005 = flag:domain_limit
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.005
			scope:recipient = {
				zz_valyria_magic_apply_character_modifier_effect = { 
					MODIFIER = zz_valyria_magic_alchemy_magic_05_mysteries_of_realm_fortification_option_01_modifier
					DURATION = -1
					BOOSTED_DURATION = -1
				}
			}
		}
		if = {
			limit = {
				var:zz_valyria_magic_alchemy_magic_spells.005 = flag:vassal_limit
			}
			remove_variable = zz_valyria_magic_alchemy_magic_spells.005
			scope:recipient = {
				zz_valyria_magic_apply_character_modifier_effect = { 
					MODIFIER = zz_valyria_magic_alchemy_magic_05_mysteries_of_realm_fortification_option_02_modifier
					DURATION = -1
					BOOSTED_DURATION = -1
				}
			}
		}
		scope:recipient = {			
			if = {
				limit = {
					NOT = { scope:actor = scope:recipient }
				}
				add_opinion = {
					modifier = grateful_opinion
					target = scope:actor
					opinion = 70
				}
			}
		}
	}
}