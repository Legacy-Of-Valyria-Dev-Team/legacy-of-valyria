zz_valyria_shadow_speed = {
	send_interface_message = {
		type = event_generic_neutral
		title = magic_shadow_speed
		desc = magic_shadow_speed_text
		left_icon = scope:actor
		right_icon = scope:recipient
		custom_tooltip = magic_shadow_speed_text
		if = {
			limit = {
				NOT = {
					scope:actor = scope:recipient
				}
			}
			stress_impact = {
				compassionate = medium_stress_impact_loss
				sadistic = minor_stress_gain
				callous = minor_stress_gain
			}
		}
		if = {
			limit = {
				scope:shadow_speed_blessing = yes
			}
			scope:recipient = { 
				add_character_modifier = {
					modifier = zz_valyria_magic_speed_of_shadows 
					months = 18
				}	
			}
		}
		else_if = {
			limit = {
				scope:shadow_speed_curse = yes
			}
			add_character_modifier = {
				modifier = zz_valyria_magic_speed_of_shadows 
				months = 18
			}
		}				
		if = {
			limit = {
				NOT = { scope:actor = scope:recipient }
			}
			add_opinion = {
				modifier  = grateful_opinion
				target = scope:actor
				opinion = 70
			}
		}
	}
}


zz_valyria_shadow_dagger = {
	send_interface_message = {
		type = event_generic_neutral
		title = magic_shadow_dagger
		desc = magic_shadow_dagger_text
		left_icon = scope:actor
		right_icon = scope:recipient
		custom_tooltip = magic_shadow_dagger_text
		if = {
			limit = {
				NOT = {
					scope:actor = scope:recipient
				}
			}
			stress_impact = {
				compassionate = medium_stress_impact_loss
				sadistic = minor_stress_gain
				callous = minor_stress_gain
			}
		}
		if = {
			limit = {
				scope:shadow_dagger_blessing = yes
			}
			scope:recipient = { 
				add_character_modifier = {
					modifier = zz_valyria_magic_dagger_of_shadows 
					months = 18
				}	
			}
		}
		else_if = {
			limit = {
				scope:shadow_dagger_curse= yes
			}
			add_character_modifier = {
				modifier = zz_valyria_magic_dagger_of_shadows 
				months = 18
			}
		}				
		if = {
			limit = {
				NOT = { scope:actor = scope:recipient }
			}
			add_opinion = {
				modifier  = grateful_opinion
				target = scope:actor
				opinion = 70
			}
		}
	}
}

zz_valyria_shadow_shield = {
	send_interface_message = {
		type = event_generic_neutral
		title = magic_shadow_shield
		desc = magic_shadow_shield_text
		left_icon = scope:actor
		right_icon = scope:recipient
		custom_tooltip = magic_shadow_shield_text
		if = {
			limit = {
				NOT = {
					scope:actor = scope:recipient
				}
			}
			stress_impact = {
				compassionate = medium_stress_impact_loss
				sadistic = minor_stress_gain
				callous = minor_stress_gain
			}
		}
		scope:recipient = {
			if = {
				limit = {
					scope:shadow_shield_blessing = yes
				}
				scope:recipient = { 
					add_character_modifier = {
						modifier = zz_valyria_magic_shield_of_shadow 
						months = 18
					}
					
				}
			}
			else_if = {
				limit = {
					scope:shadow_shield_curse= yes
				}
				add_character_modifier = {
					modifier = zz_valyria_magic_shield_of_shadow 
					months = 18
				}
			}				
			if = {
				limit = {
					NOT = { scope:actor = scope:recipient }
				}
				add_opinion = {
					modifier  = grateful_opinion
					target = scope:actor
					opinion = 70
				}
			}
		}
	}
}


zz_valyria_shadow_cloak = {
	send_interface_message = {
		type = event_generic_neutral
		title = magic_shadow_cloak
		desc = magic_shadow_cloak_text
		left_icon = scope:actor
		right_icon = scope:recipient
		custom_tooltip = magic_shadow_cloak_text
		if = {
			limit = {
				NOT = {
					scope:actor = scope:recipient
				}
			}
			stress_impact = {
				compassionate = medium_stress_impact_loss
				sadistic = minor_stress_gain
				callous = minor_stress_gain
			}
		}
		scope:recipient = {
			if = {
				limit = {
					scope:shadow_shield_blessing = yes
				}
				scope:target.title_province = {
					county = {
						if = {
							limit = {
								scope:secondary_actor  = {
									any_character_artifact = {
										has_variable = glass_candle
									}
								}
							}
							add_county_modifier = {
								modifier = zz_valyria_magic_cloaking_shadow
								months = 36
							}
						}
						else = {
							add_county_modifier = {
								modifier = zz_valyria_magic_cloaking_shadow
								months = 18
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					scope:shadow_shield_curse= yes
				}
				scope:target.title_province = {
					county = {
						if = {
							limit = {
								scope:secondary_actor  = {
									any_character_artifact = {
										has_variable = glass_candle
									}
								}
							}
							add_county_modifier = {
								modifier = zz_valyria_magic_cloaking_shadow
								months = 36
							}
						}
						else = {
							add_county_modifier = {
								modifier = zz_valyria_magic_cloaking_shadow
								months = 18
							}
						}
					}
				}
			}				
			if = {
				limit = {
					NOT = { scope:actor = scope:recipient }
				}
				add_opinion = {
					modifier  = grateful_opinion
					target = scope:actor
					opinion = 70
				}
			}
		}
	}
}
