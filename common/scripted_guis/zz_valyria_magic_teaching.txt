zz_valyria_magic_teaching = {
	scope = character
	saved_scopes = {
	}
	is_shown = {
		exists = var:zz_magic_learner
	}
	is_valid = {
	}
	effect = {
	}
}

zz_valyria_magic_teaching_close = {
	scope = character
	saved_scopes = {
	}
	is_shown = {
	}
	is_valid = {
	}
	effect = {
		remove_variable = zz_magic_learner
		remove_variable = zz_magic_teacher
		clear_variable_list = zz_valyria_spell_list
		clear_variable_list = mage_list
	}
}

zz_valyria_magic_teacher = {
	scope = character
	saved_scopes = {
		zz_magic_teacher
	}
	
	effect = {
		scope:zz_magic_caster = {
			root = {
				clear_variable_list = zz_valyria_spell_list
				set_variable = {
					name = zz_magic_teacher
					value = scope:zz_magic_teacher
				}
			}
			scope:zz_magic_teacher = {
				every_memory = {
					limit = { 
						has_memory_category = magic
					}
					root = {
						add_to_variable_list = {
							name = zz_valyria_spell_list
							target = prev
						}
					}
				}
			}
		}
	}
}

zz_valyria_magic_teach_action_01 = {
	scope = character
	is_valid = {

		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_01_mysteries_of_restoration
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_01_mysteries_of_restoration
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_03_mysteries_of_regeneration
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_03_mysteries_of_regeneration
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_04_mysteries_of_renewal
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_04_mysteries_of_renewal
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_05_mysteries_of_replication
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_05_mysteries_of_replication
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_06_mysteries_of_draconic_rejuvenation
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_06_mysteries_of_draconic_rejuvenation
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_07_mysteries_of_enchanted_blood
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_07_mysteries_of_enchanted_blood
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_08_mysteries_of_dragon_laying
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_08_mysteries_of_dragon_laying
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_09_mysteries_of_draconic_enhancement
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_09_mysteries_of_draconic_enhancement
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_10_mysteries_of_draconic_blood
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_10_mysteries_of_draconic_blood
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_11_mysteries_of_longevity
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_11_mysteries_of_longevity
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_12_mysteries_of_vitality
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_12_mysteries_of_vitality
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_13_mysteries_of_resilience
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_13_mysteries_of_resilience
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_14_mysteries_of_fortitude
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_14_mysteries_of_fortitude
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_15_mysteries_of_fertility
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_15_mysteries_of_fertility
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_16_mysteries_of_blood_control
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_16_mysteries_of_blood_control
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_17_mysteries_of_vital_consumption
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_17_mysteries_of_vital_consumption
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_19_mysteries_of_sex_selection
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_19_mysteries_of_sex_selection
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_20_mysteries_of_maternal_protection
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_20_mysteries_of_maternal_protection
					}
				}
			}
		}
		trigger_if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_21_mysteries_of_babe_protection
				}
			}
			var:zz_magic_learner = { 
				NOT = {
					zz_valyria_knows_spell = {
						SPELL = zz_valyria_magic_blood_magic_21_mysteries_of_babe_protection
					}
				}
			}
		}
	}
	effect = {

		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_01_mysteries_of_restoration
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_01_mysteries_of_restoration
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_03_mysteries_of_regeneration
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_03_mysteries_of_regeneration
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_04_mysteries_of_renewal
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_04_mysteries_of_renewal
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_05_mysteries_of_replication
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_05_mysteries_of_replication
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_06_mysteries_of_draconic_rejuvenation
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_06_mysteries_of_draconic_rejuvenation
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_07_mysteries_of_enchanted_blood
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_07_mysteries_of_enchanted_blood
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_08_mysteries_of_dragon_laying
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_08_mysteries_of_dragon_laying
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_09_mysteries_of_draconic_enhancement
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_09_mysteries_of_draconic_enhancement
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_10_mysteries_of_draconic_blood
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_10_mysteries_of_draconic_blood
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_11_mysteries_of_longevity
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_11_mysteries_of_longevity
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_12_mysteries_of_vitality
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_12_mysteries_of_vitality
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_13_mysteries_of_resilience
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_13_mysteries_of_resilience
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_14_mysteries_of_fortitude
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_14_mysteries_of_fortitude
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_15_mysteries_of_fertility
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_15_mysteries_of_fertility
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_16_mysteries_of_blood_control
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_16_mysteries_of_blood_control
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_17_mysteries_of_vital_consumption
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_17_mysteries_of_vital_consumption
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_19_mysteries_of_sex_selection
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_19_mysteries_of_sex_selection
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_20_mysteries_of_maternal_protection
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_20_mysteries_of_maternal_protection
				}
			}
		}
		if  = { 
			limit  = {
				scope:zz_valyria_mystery = {
					has_memory_type = zz_valyria_magic_blood_magic_21_mysteries_of_babe_protection
				}
			}
			var:zz_magic_learner = {
				zz_add_spell = { 
					SPELL = zz_valyria_magic_blood_magic_21_mysteries_of_babe_protection
				}
			}
		}
		var:zz_magic_teacher = {
			add_character_flag = { flag = zz_valyria_magic_taught_magic months = 18 } 
		}
		root = {
			remove_variable = zz_magic_learner
			remove_variable = zz_magic_teacher
			clear_variable_list = zz_valyria_spell_list
			clear_variable_list = mage_list
		}
	}
}