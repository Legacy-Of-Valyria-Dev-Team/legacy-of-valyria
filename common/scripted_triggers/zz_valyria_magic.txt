zz_valyria_has_artifact = {

}

zz_valyria_has_mana_to_cast = { 
	OR = {
		has_character_modifier = zz_valyria_magic_drops_power
		AND = {
			has_trait = zz_magister
			has_trait_xp = {
				trait = zz_magister
				track = drops_of_power
				value >= $MANACOST$
			}
		}
	}
}

zz_valyria_can_gain_mana = {
	OR = {
		AND = {
			has_trait = zz_magister
			has_trait_xp = {
				trait = zz_magister
				track = drops_of_power
				value < 100
			}
		}
		NOR = {
			has_trait = zz_magister
			has_character_modifier = zz_valyria_magic_drops_power
		}
	}
}

zz_valyria_is_mage = {
	OR = { 
		has_trait = zz_magister
		
		any_courtier_or_guest = { 
			has_trait = zz_magister
		}
		any_child = { 
			has_trait = zz_magister
		}
	}
}
zz_valyria_is_mage_can_teach = {
	OR = { 
		has_trait = zz_magister
		NOT = { 
			has_character_flag = zz_valyria_magic_taught_magic 
		}
		any_courtier_or_guest = { 
			has_trait = zz_magister
			NOT = { 
				has_character_flag = zz_valyria_magic_taught_magic 
			}
		}
		any_child = { 
			has_trait = zz_magister
			NOT = { 
				has_character_flag = zz_valyria_magic_taught_magic 
			}
		}
	}
}


zz_valyria_knows_spell = {
	OR = { 
		has_character_flag = $SPELL$_flag
		any_artifact = { has_variable = $SPELL$_flag }
	}
}

zz_valyria_knows_spell_court = {
	OR = { 
		zz_valyria_knows_spell = {
			SPELL = $SPELL$
		}
		any_courtier_or_guest = { 
			zz_valyria_knows_spell = {
				SPELL = $SPELL$
			}
		}
		any_child = { 
			zz_valyria_knows_spell = {
				SPELL = $SPELL$
			}
		}
	}
}

zz_valyria_valid_caster = {
	zz_valyria_knows_spell = {
		SPELL = $SPELL$
	}
	zz_valyria_has_mana_to_cast = {
		MANACOST = $MANACOST$
	}
	is_incapable = no 
}

zz_valyria_valid_caster_court = {
	OR = { 
		zz_valyria_valid_caster = {
			SPELL = $SPELL$
			MANACOST = $MANACOST$
		}
		any_courtier_or_guest = { 
			zz_valyria_valid_caster = {
				SPELL = $SPELL$
				MANACOST = $MANACOST$
			}
		}
		any_child = { 
			zz_valyria_valid_caster = {
				SPELL = $SPELL$
				MANACOST = $MANACOST$
			}
		}
	}
}