on_game_start_after_lobby = {
	on_actions = {
		#zz_valyria_magic_grant_spells
	}
	events = {
		zz_valyria_magic.1
	}
}




quarterly_playable_pulse = {
	on_actions = {
		zz_valyria_mana_gain_on_action
	}
}

zz_valyria_mana_gain_on_action = {
	trigger = {
		has_trait = born_under_a_red_comet
	}
	effect = {
		zz_valyria_mana_gain = {
			MANAGAIN = 1
		}
		if = {
			limit = {
				has_variable = dragonlore
			}
			change_variable = {
				name = dragonlore
				add = 1
			}
		}
		else = {
			set_variable = {
				name = dragonlore
				value = 1
			}
		}
	}
}

zz_valyria_magic_grant_spells = {
	trigger = {
		has_trait = zz_magister
	}
	effect = {
		if = { 
			limit = { 
				has_trait = born_under_a_red_comet
			}
			add_trait_xp = {
				trait = born_under_a_red_comet
				track = chosen_of_the_heavens
				value = 100
			}
		}
		zz_random_gain_magic_spell = yes 
		zz_random_gain_magic_spell = yes 

		#dragon training
		#add_character_flag = dragon_training

		#charm magic 
		#add_character_flag = mental_domination_spell_flag
		#shadow magic
		
		#blood magic
		#add_character_flag = genetic_manipulation_spell_flag
		#add_character_flag = healing_spell_flag
		
		#Alchemical Magic
		#add_character_flag = empowerment_of_arms_spell_flag
		#add_character_flag = building_speed_spell_flag
		#add_character_flag = development_boost_spell_flag
		#add_character_flag = transmutation_spell_flag
		
		#Divination Magic
		#add_character_flag = dreaming_within_spell_flag
		#add_character_flag = secrets_of_dreams_spell_flag
		#add_character_flag = dreams_of_experience_spell_flag

		#flame magic 
		#add_character_flag = flame_strike_spell_flag
	}
}



on_building_completed = {
	effect = { 
		if = { 
			limit = {  
				has_building_with_flag = { flag = travel_point_of_interest_magic }
				NOT = { has_travel_point_of_interest = poi_valyria_magic }
			}
			add_travel_point_of_interest = poi_valyria_magic
		}
	}
}

on_travel_plan_cancel = {
	effect = {
	}
}