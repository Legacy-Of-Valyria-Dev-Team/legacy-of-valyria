namespace = zz_valyria_colonization


# INVALIDATION - PRISON
zz_valyria_colonization.0005 = {
	type = character_event
	title = zz_valyria_colonization.0005.t
	desc = zz_valyria_colonization.0005.desc
	theme = prison

	left_portrait = {
		character = root
		animation = prisonhouse
	}

	immediate = {
		imprisoner ?= {
			save_scope_as = jailor
		}
		create_character_memory = {
			type = imprisoned_adult_education
			participants = {
				jailor = scope:jailor
			}
		}
	}

	option = {
		name = zz_valyria_colonization.0005.a
	}
}

scripted_trigger adult_education_teacher_would_leave_trigger = {
	NOT = { # Don't poach player courtiers
		liege ?= { is_ai = no }
	}
	OR = {
		has_relation_friend = root
		opinion = {
			target = root
			value >= 60
		}
	}
}

# CONCLUSION EVENT
zz_valyria_colonization.0009 = {
	type = activity_event
	title = zz_valyria_colonization.0009.t
	desc = {
		desc = zz_valyria_colonization.0009.desc
		triggered_desc = {
			trigger = {
				scope:teacher_1 = { adult_education_teacher_would_leave_trigger = yes }
			}
			desc = zz_valyria_colonization.0009.desc_teacher_1
		}
		triggered_desc = {
			trigger = {
				scope:teacher_2 = { adult_education_teacher_would_leave_trigger = yes }
			}
			desc = zz_valyria_colonization.0009.desc_teacher_2
		}
	}
	theme = university

	center_portrait = {
		character = root
		animation = thinking
	}

	immediate = {
		#Reward effects
		valyria_colonization_completed_log_entry_effect = yes
		scope:activity = {
		}
	}

	option = {
		name = zz_valyria_colonization.0009.a
		ai_chance = {
			base = 100
		}
	}
}

## ARRIVAL EVENTS
zz_valyria_colonization.0010 = {
	type = activity_event
	title = zz_valyria_colonization.0010.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					location = {
						has_university_building_trigger = yes
					}
				}
				desc = zz_valyria_colonization.0010.desc_uni
			}
			desc = zz_valyria_colonization.0010.desc_religious
		}
		desc = zz_valyria_colonization.0010.desc_end
		triggered_desc = {
			trigger = {
				"scope:host.capital_province.squared_distance(scope:location)" >= squared_distance_massive
			}
			desc = zz_valyria_colonization.0010.desc_very_very_far
		}
	}
	theme = university

	center_portrait = {
		character = root
		animation = happy_teacher
	}

	immediate = {
		scope:activity.activity_location = { save_scope_as = location }
	}

	option = {
		name = zz_valyria_colonization.0010.a
	}
}