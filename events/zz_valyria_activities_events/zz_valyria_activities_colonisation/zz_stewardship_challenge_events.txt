namespace = zz_valyria_colonisation

## Progress Event Stewardship - Logistics & Supply Flow
zz_valyria_colonisation.0200 = {
	type = activity_event
	title = zz_valyria_colonisation.0200.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { 
					scope:location= {
						is_coastal = yes
					}
				}
				desc = zz_valyria_colonisation.0200.coastal.desc
			}
			triggered_desc = {
				desc = zz_valyria_colonisation.0200.land.desc
			}
		}
	}
	theme = university

	center_portrait = {
		character = root
		animation = personality_rational
	}

	cooldown = { years = 1 }

	trigger = {
		always = yes
	}

	weight_multiplier = {
		base = 1
		modifier = {
			has_trait = theologian
			add = 2
		}
		modifier = {
			has_trait = scholar
			add = 1
		}
	}

	immediate = {
		scope:activity = {
			activity_location = { save_scope_as = location }
		}
		root = { save_scope_as = book_creator }
	}

	# Option A: Try to negotiate with the merchants
	option = {
		name = zz_valyria_colonisation.0200.a
		trigger = {
		}
		hidden_effect = {
			duel = {
				skill = stewardship
				value = high_skill_rating
				40 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 3.5
						min = -49
					}					
					trigger_event = zz_valyria_colonisation.02001
						
				}
				60 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -3.5
						min = -49
					}
					trigger_event = zz_valyria_colonisation.02002
				}
			}
		}
		
		ai_chance = {
			base = 100
		}
	}


	# Option C: opt-out
	option = {
		name = zz_valyria_colonisation.0200.c
		stress_impact = {
			base = medium_stress_impact_loss
		}
		ai_chance = {
			base = 50
			modifier = {
				has_trait = lazy
				add = 100
			}
			modifier = {
				has_trait = intellect_bad
				add = 100
			}
			modifier = {
				has_trait = dull
				add = 100
			}
		}
	}
}

zz_valyria_colonisation.02001 = { ## Successful negotiations with Merchants
	type = activity_event
	title = zz_valyria_colonisation.02001.t
	desc = zz_valyria_colonisation.02001.desc
	
	theme = university

	center_portrait = {
		character = root
		animation = personality_rational
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			has_trait = theologian
			add = 2
		}
		modifier = {
			has_trait = scholar
			add = 1
		}
	}
	
	option = { # Option title
		name = zz_valyria_colonisation.02001.a.title
		add_gold = medium_gold_value_check
		stress_impact = {
			base = medium_stress_impact_loss
		}
		hidden_effect = {
			custom_tooltip = zz_valyria_colonisation_tt_positive_massive
			scope:activity = { activity_special_type_progression_massive = yes }
		}
		ai_chance = {
			base = 50
		}
	}
}

zz_valyria_colonisation.02002 = { ## Unsuccessful negotiations with Merchants
	type = activity_event
	title = zz_valyria_colonisation.02002.t
	desc = zz_valyria_colonisation.02002.desc
	
	theme = university

	center_portrait = {
		character = root
		animation = personality_rational
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			has_trait = theologian
			add = 2
		}
		modifier = {
			has_trait = scholar
			add = 1
		}
	}
	
	option = { # Option title
		name = zz_valyria_colonisation.02002.a.title
		remove_gold = medium_gold_value_check
		stress_impact = {
			base = medium_stress_impact_gain
		}
		hidden_effect = {
			scope:activity = { activity_special_type_progression_tiny = yes }
		}
		ai_chance = {
			base = 50
		}
	}
}