
namespace = zz_valyria_magic

#You read a book of magic. 
zz_valyria_magic.9000 = {
	type = character_event
	title = zz_valyria_magic.9000.t
	desc = zz_valyria_magic.9000.desc
	theme = university
	left_portrait = root


	immediate = {
	}

	trigger = {
		OR = {
			NOT = { 
				has_character_flag = no_magic
			}
			has_trait = zz_magister
		}
	}

	option = {
		name = zz_valyria_magic.9000.a
		trigger = {
			is_ai = no
			NOT = {
				has_trait = zz_magister
			}
		}
		custom_tooltip = {
			text = zz_valyira_magic_youre_a_wizard_harry
			add_trait_force_tooltip = zz_magister
			zz_random_gain_magic_spell = yes 
		}
	}
	option = {
		name = zz_valyria_magic.9000.b
		trigger = {
			has_trait = zz_magister
		}
		custom_tooltip = {
			text = zz_valyira_magic_youre_a_wizard_harry
			zz_valyria_gain_spell_experience = {
				XPGAIN = 5
				XPTRACK = secrets_of_the_higher_mysteries
			}
			zz_random_gain_magic_spell = yes 
		}
	}
	option = {
		name = zz_valyria_magic.9000.z
		trigger = {
			NOT = {
				has_trait = zz_magister
			}
		}
		custom_tooltip = {
			text = burn_you_witch
			add_character_flag = no_magic
		}
	}
}


zz_valyria_magic.1 = {
	hidden = yes
	scope = none
	trigger = {
	}
	immediate = {
		every_ruler = {
			limit = {
				has_trait = zz_magister
			}
			send_interface_toast = {
				if = { 
					limit = { 
						has_trait = born_under_a_red_comet
					}
					add_trait_xp = {
						trait = born_under_a_red_comet
						track = chosen_of_the_heavens
						value = 100
					}
					add_trait_xp = {
						trait = zz_magister
						track = drops_of_power
						value = 100
					}
				}
				zz_random_gain_magic_spell = yes 
				if = {
					limit = {
						has_variable = dragonlore
					}
					change_variable = {
						name = dragonlore
						add = 10
					}
				}
				else = {
					set_variable = {
						name = dragonlore
						value = 10
					}
				}

			}
		}
	}
}
