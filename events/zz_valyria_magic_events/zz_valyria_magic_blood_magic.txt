
namespace = zz_valyria_magic_blood_magic


############################
## Enchanted Blood Spell 
############################
zz_valyria_magic_blood_magic.0001 = {
	hidden = yes

	immediate = {
		random_list = {
			20 = {
				send_interface_toast = {
					title = graceful_aging_message_title
					left_icon = root
					add_diplomacy_skill = 1
				}
			}
			20 = {
				send_interface_toast = {
					title = graceful_aging_message_title
					left_icon = root
					add_martial_skill = 1
				}
			}
			20 = {
				send_interface_toast = {
					title = graceful_aging_message_title
					left_icon = root
					add_intrigue_skill = 1
				}
			}
			20 = {
				send_interface_toast = {
					title = graceful_aging_message_title
					left_icon = root
					add_stewardship_skill = 1
				}
			}
			20 = {
				send_interface_toast = {
					title = graceful_aging_message_title
					left_icon = root
					add_learning_skill = 1
				}
			}
		}
	}
}
zz_valyria_magic_blood_magic.0002 = {
	hidden = yes

	immediate = {
		THIS = { 
			save_scope_as = dragon
		}
		send_interface_toast = {
			title = graceful_aging_message_title
			left_icon = root
			add_prowess_skill = var:zz_valyria_magic_blood_magic_09_mysteries_of_draconic_enhancement  
			change_dragon_size_direct = {
				VALUE = var:zz_valyria_magic_blood_magic_09_mysteries_of_draconic_enhancement
			}
		}
		var:current_rider ?= { 
			save_scope_as = rider 
		}
		scope:rider ?= {
			send_interface_toast = {
				title = graceful_aging_message_title
				left_icon = scope:rider
				right_icon = root
			}
		}
	}
}

## Replication
zz_valyria_magic_blood_magic.0003 = {
	type = character_event
	window = dragon_character_event
	title = zz_valyria_magic_blood_magic.0003.t
	desc = zz_valyria_magic_blood_magic.0003.desc
	theme = dragon
	left_portrait = root
	right_portrait = {
		character = scope:character_clone
	}


	#NAMING WIDGET
	widget = {
		gui = "event_window_widget_name_child"
		container = "dynamic_birth_name"
		controller = name_character
		setup_scope = { scope:character_clone = { save_scope_as = name_character_target } }
	}

	option = {
		name = zz_valyria_magic_blood_magic.0003.opt.a
	}
}

### zz_blood_magic_spells_option

namespace = zz_valyria_magic_blood_magic_spells

zz_valyria_magic_blood_magic_spells.001 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.001.t
	desc = zz_valyria_magic_blood_magic_spells.001.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_01_mysteries_of_restoration
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.002 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.002.t
	desc = zz_valyria_magic_blood_magic_spells.002.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.a
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = intellect_good_3 }
			}
			NOT = {
				has_trait = dragon
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells002 
			value = flag:add_intelligence 
			days = 1
		}

		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.b
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = physique_good_3 }
				NOT = {
					has_trait = dragon
				}
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells002 
			value = flag:add_strength
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.c
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = beauty_good_3 }
				NOT = {
					has_trait = dragon
				}
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells002 
			value = flag:add_beauty
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.d
		trigger = { 
			scope:recipient = {
				has_trait = infertile
				NOT = {
					has_trait = dragon
				}
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells002 
			value = flag:remove_infertile
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.e
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = intellect_bad_3 }
				NOT = {
					has_trait = dragon
				}
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells002 
			value = flag:remove_intelligence 
			days = 1
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.f
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = physique_bad_3 }
				NOT = {
					has_trait = dragon
				}
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells002 
			value = flag:remove_strength
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.g
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = beauty_bad_3 }
				NOT = {
					has_trait = dragon
				}
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells002 
			value = flag:remove_beauty
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_02_mysteries_of_transmogrification
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.h
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = infertile }
				NOT = {
					has_trait = dragon
				}
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells002 
			value = flag:add_infertile
			days = 1
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.002.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.003 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.003.t
	desc = zz_valyria_magic_blood_magic_spells.003.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_regiments
		remove_variable = selected_regiment
		scope:recipient = {
			every_maa_regiment = {
				limit = {
					maa_current_troops_count < maa_max_troops_count
				}
				root = {
					add_to_variable_list = {
						name = possible_regiments
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_regiment }
						}
						set_variable = { name = selected_regiment value = prev }
					}
				}
			}
		}

	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_regiments
					count > 0
				}
			}
		}
		gui = "event_window_maa_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.003.opt.a
		trigger = {
			scope:recipient = {
				any_maa_regiment = {
					maa_current_troops_count < maa_max_troops_count
				}
			}

		}
		var:selected_regiment ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_03_mysteries_of_regeneration
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.003.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.004 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.004.t
	desc = zz_valyria_magic_blood_magic_spells.004.desc
	theme = dragon
	left_portrait = root
	right_portrait = {
		character = scope:recipient
	}

	immediate = {
		clear_variable_list = possible_armies
		remove_variable = selected_army
		scope:recipient = {
			every_army = {
				root = {
					add_to_variable_list = {
						name = possible_armies
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_army }
						}
						set_variable = { name = selected_army value = prev }
					}
				}
			}
		}

	}
	widget = {
		is_shown = {
			scope:recipient = {
				has_raised_armies = yes
			}
		}
		gui = "event_window_army_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.004.opt.a
		trigger = {
			scope:recipient = {
				has_raised_armies = yes
			}
		}
		var:selected_army ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_04_mysteries_of_renewal
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.003.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.005 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.005.t
	desc = zz_valyria_magic_blood_magic_spells.005.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_artifacts
		remove_variable = selected_artifact
		every_character_artifact = {
			limit = {
				has_variable = dragon_egg
				has_variable = dud_egg
				NOT = { has_variable = cradled_egg }
				#NOT = { has_variable = dud_egg }
				NOT = { has_variable = pitted_egg }
			}
			root = {
				add_to_variable_list = {
					name = possible_artifacts
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = selected_artifact }
					}
					set_variable = { name = selected_artifact value = prev }
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_artifact_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.a
		var:selected_artifact ?= { 
			save_scope_as = target
		}
		trigger_event = zz_valyria_magic_blood_magic_spells.00501
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.00501 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.005.t
	desc = zz_valyria_magic_blood_magic_spells.005.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list ?= possible_characters
		remove_variable = si_selected_character
		scope:recipient = {
			root = {
				add_to_variable_list = {
					name = possible_characters
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = si_selected_character }
					}
					set_variable = { name = si_selected_character value = prev }
				}
			}
			every_close_or_extended_family_member = {
				even_if_dead = yes
				root = {
					add_to_variable_list = {
						name = possible_characters
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = si_selected_character }
						}
						set_variable = { name = si_selected_character value = prev }
					}
				}
			}
		}
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	

	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		var:si_selected_character ?= { 
			save_scope_as = target_char
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells005
			value = flag:make_clone_adult
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_05_mysteries_of_replication
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.b
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		var:si_selected_character ?= { 
			save_scope_as = target_char
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells005
			value = flag:make_clone_child
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_05_mysteries_of_replication
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.005.opt.c
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		var:si_selected_character ?= { 
			save_scope_as = target_char
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells005
			value = flag:make_clone_genderswap
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_05_mysteries_of_replication
		}
	}
}
zz_valyria_magic_blood_magic_spells.006 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.006.t
	desc = zz_valyria_magic_blood_magic_spells.006.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_artifacts
		remove_variable = selected_artifact
		scope:recipient = {
			every_character_artifact = {
				limit = {
					has_variable = dragon_egg
					has_variable = dud_egg 
					NOT = { has_variable = cradled_egg }
					NOT = { has_variable = pitted_egg }
				}
				root = {
					add_to_variable_list = {
						name = possible_artifacts
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_artifact }
						}
						set_variable = { name = selected_artifact value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_artifact_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.006.opt.a
		trigger = {
			scope:recipient = {
				any_character_artifact = {
					has_variable = dragon_egg
					has_variable = dud_egg 
					NOT = { has_variable = cradled_egg }
					NOT = { has_variable = pitted_egg }
				}
			}
		}
		var:selected_artifact ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_06_mysteries_of_draconic_rejuvenation
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.006.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.007 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.007.t
	desc = zz_valyria_magic_blood_magic_spells.007.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.007.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					has_trait = dragon
				}
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_07_mysteries_of_enchanted_blood
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.001.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.008 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.008.t
	desc = zz_valyria_magic_blood_magic_spells.008.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.008.opt.a
		trigger = {
			scope:recipient = {
				has_trait = dragon
				is_female = yes
				NOT = { 
					has_character_flag = zz_valyria_magic_blood_magic_08_mysteries_of_dragon_laying_effect_flag
				}
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_08_mysteries_of_dragon_laying
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.008.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.009 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.009.t
	desc = zz_valyria_magic_blood_magic_spells.009.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.009.opt.a
		trigger = {
			scope:recipient = {
				has_trait = dragon
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_09_mysteries_of_draconic_enhancement
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.009.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.010 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.010.t
	desc = zz_valyria_magic_blood_magic_spells.010.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.010.opt.a
		trigger = {
			scope:recipient = {
				NOT = {
					agot_is_dragonblood_character = yes
				}
				NOT = {
					has_trait = dragon
				}
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_10_mysteries_of_draconic_blood
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.010.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.011 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.011.t
	desc = zz_valyria_magic_blood_magic_spells.011.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.011.opt.a
		trigger = {
			scope:recipient = {
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_11_mysteries_of_longevity
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.011.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.012 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.012.t
	desc = zz_valyria_magic_blood_magic_spells.012.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.012.opt.a
		trigger = {
			scope:recipient = {
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_12_mysteries_of_vitality
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.012.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.013 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.013.t
	desc = zz_valyria_magic_blood_magic_spells.013.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.013.opt.a
		trigger = {
			scope:recipient = {
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_13_mysteries_of_resilience
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.013.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.014 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.014.t
	desc = zz_valyria_magic_blood_magic_spells.014.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.014.opt.a
		trigger = {
			scope:recipient = {
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_14_mysteries_of_fortitude
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.014.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.015 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.015.t
	desc = zz_valyria_magic_blood_magic_spells.015.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.015.opt.a
		trigger = {
			scope:recipient = {
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_15_mysteries_of_fertility
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.015.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.016 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.016.t
	desc = zz_valyria_magic_blood_magic_spells.016.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_armies
		remove_variable = selected_army
		scope:recipient = {
			every_army = {
				root = {
					add_to_variable_list = {
						name = possible_armies
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_army }
						}
						set_variable = { name = selected_army value = prev }
					}
				}
			}
		}

	}
	widget = {
		is_shown = {
			scope:recipient = {
				has_raised_armies = yes
			}
		}
		gui = "event_window_army_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.016.opt.a
		trigger = {
			scope:recipient = {
				has_raised_armies = yes
			}
		}
		var:selected_army = {
			save_scope_as = target 
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_16_mysteries_of_blood_control
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.016.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.017 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.017.t
	desc = zz_valyria_magic_blood_magic_spells.017.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.017.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells017
			value = flag:weaken_power
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_17_mysteries_of_vital_consumption
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.017.opt.a
		trigger = {
			scope:recipient = {
				
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells017
			value = flag:max_power
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_17_mysteries_of_vital_consumption
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.017.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.018 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.018.t
	desc = zz_valyria_magic_blood_magic_spells.018.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.a
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = dragon_physique_good_3 }
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells018 
			value = flag:dragon_physique_good_3 
			days = 1
		}

		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.b
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = dragon_majestic }
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells018 
			value = flag:dragon_majestic
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.c
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = dragon_swift }
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells018 
			value = flag:dragon_swift
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.d
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = dragon_physique_bad_3 }
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells018 
			value = flag:dragon_physique_bad_3 
			days = 1
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.e
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = dragon_slow }
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells018 
			value = flag:dragon_slow
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.f
		trigger = { 
			scope:recipient = {
				NOT = { has_trait = dragon_ugly }
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells018 
			value = flag:dragon_ugly
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.g
		trigger = { 
			scope:recipient = {
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells018 
			value = flag:toggle_fertile
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.h
		trigger = { 
			scope:recipient = {
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells018 
			value = flag:toggle_spindly
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_18_mysteries_of_draconic_genetics
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.018.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.019 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.019.t
	desc = zz_valyria_magic_blood_magic_spells.019.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.019.opt.a
		trigger = {
			scope:recipient = {
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells019 
			value = flag:force_male
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_19_mysteries_of_sex_selection
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.019.opt.b
		trigger = {
			scope:recipient = {
			}
		}
		set_variable = { 
			name = zz_valyria_magic_blood_magic_spells019 
			value = flag:force_female
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_19_mysteries_of_sex_selection
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.015.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.020 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.020.t
	desc = zz_valyria_magic_blood_magic_spells.020.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.020.opt.a
		trigger = {
			scope:recipient = {
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_20_mysteries_of_maternal_protection
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.020.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.021 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.021.t
	desc = zz_valyria_magic_blood_magic_spells.021.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_blood_magic_spells.021.opt.a
		trigger = {
			scope:recipient = {
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_21_mysteries_of_babe_protection
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.021.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.022 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_artifacts
		remove_variable = selected_artifact
		scope:recipient = {
			every_character_artifact = {
				limit = {
					has_variable = dragon_egg
					NOT = {has_variable = dud_egg }
					NOT = { has_variable = cradled_egg }
					NOT = { has_variable = pitted_egg }
				}
				root = {
					add_to_variable_list = {
						name = possible_artifacts
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_artifact }
						}
						set_variable = { name = selected_artifact value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_artifact_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		trigger = {
		}
		var:selected_artifact ?= { 
			save_scope_as = target
		}
		trigger_event = zz_valyria_magic_blood_magic_spells.02201
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}

zz_valyria_magic_blood_magic_spells.02201 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		var:si_selected_character = {
			save_scope_as = target_char_01
		}
		trigger_event = zz_valyria_magic_blood_magic_spells.02202
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02202 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		var:si_selected_character = {
			save_scope_as = target_char_02
		}
		trigger_event = zz_valyria_magic_blood_magic_spells.02203
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02203 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		var:si_selected_character = {
			save_scope_as = target_char_03
		}
		trigger_event = zz_valyria_magic_blood_magic_spells.02204
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02204 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		var:si_selected_character = {
			save_scope_as = target_char_04
		}
		trigger_event = zz_valyria_magic_blood_magic_spells.02205
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02205 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		var:si_selected_character = {
			save_scope_as = target_char_05
		}
		trigger_event = zz_valyria_magic_blood_magic_spells.02206
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02206 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		var:si_selected_character = {
			save_scope_as = target_char_06
		}
		trigger_event = zz_valyria_magic_blood_magic_spells.02207
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}
zz_valyria_magic_blood_magic_spells.02207 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_blood_magic_spells.022.t
	desc = zz_valyria_magic_blood_magic_spells.022.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		zz_valyria_immortality_ritual_list = yes
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.a
		var:si_selected_character = {
			save_scope_as = target_char_07
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_blood_magic_22_mysteries_of_draconic_consumption
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.022.opt.z
	}
}

namespace = zz_valyria_magic_shadow_magic_spells

zz_valyria_magic_shadow_magic_spells.001 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_shadow_magic_spells.001.t
	desc = zz_valyria_magic_shadow_magic_spells.001.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_shadow_magic_spells.001.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = shadow_magic
			SPELL = zz_valyria_magic_shadow_magic_01_mysteries_of_shadowy_steeds
		}
	}
	option = {
		name = zz_valyria_magic_shadow_magic_spells.001.opt.z
	}
}
zz_valyria_magic_shadow_magic_spells.002 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_shadow_magic_spells.002.t
	desc = zz_valyria_magic_shadow_magic_spells.002.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_shadow_magic_spells.002.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = shadow_magic
			SPELL = zz_valyria_magic_shadow_magic_02_mysteries_of_shadowy_daggers
		}
	}
	option = {
		name = zz_valyria_magic_shadow_magic_spells.002.opt.z
	}
}
zz_valyria_magic_shadow_magic_spells.003 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_shadow_magic_spells.003.t
	desc = zz_valyria_magic_shadow_magic_spells.003.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_shadow_magic_spells.003.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = shadow_magic
			SPELL = zz_valyria_magic_shadow_magic_03_mysteries_of_the_shadow_shield
		}
	}
	option = {
		name = zz_valyria_magic_shadow_magic_spells.003.opt.z
	}
}
zz_valyria_magic_shadow_magic_spells.004 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_shadow_magic_spells.004.t
	desc = zz_valyria_magic_shadow_magic_spells.004.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_shadow_magic_spells.004.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = shadow_magic
			SPELL  = zz_valyria_magic_shadow_magic_04_mysteries_of_the_shadowy_cloak
		}
	}
	option = {
		name = zz_valyria_magic_shadow_magic_spells.004.opt.z
	}
}
zz_valyria_magic_shadow_magic_spells.005 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_shadow_magic_spells.005.t
	desc = zz_valyria_magic_shadow_magic_spells.005.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_shadow_magic_spells.005.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = shadow_magic
			SPELL  = zz_valyria_magic_shadow_magic_05_mysteries_cloying_shadow
		}
	}
	option = {
		name = zz_valyria_magic_shadow_magic_spells.005.opt.z
	}
}
zz_valyria_magic_shadow_magic_spells.006 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_shadow_magic_spells.006.t
	desc = zz_valyria_magic_shadow_magic_spells.006.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_shadow_magic_spells.006.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = shadow_magic
			SPELL  = zz_valyria_magic_shadow_magic_06_mysteries_of_feeble_daggers
		}
	}
	option = {
		name = zz_valyria_magic_shadow_magic_spells.006.opt.z
	}
}
zz_valyria_magic_shadow_magic_spells.007 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_shadow_magic_spells.007.t
	desc = zz_valyria_magic_shadow_magic_spells.007.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_shadow_magic_spells.007.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = shadow_magic
			SPELL  = zz_valyria_magic_shadow_magic_07_mysteries_of_the_weakened_vigilience
		}
	}
	option = {
		name = zz_valyria_magic_shadow_magic_spells.007.opt.z
	}
}
zz_valyria_magic_shadow_magic_spells.008 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_shadow_magic_spells.008.t
	desc = zz_valyria_magic_shadow_magic_spells.008.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_shadow_magic_spells.008.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = shadow_magic
			SPELL  = zz_valyria_magic_shadow_magic_08_mysteries_of_the_revealed_shadows
		}
	}
	option = {
		name = zz_valyria_magic_shadow_magic_spells.008.opt.z
	}
}
namespace = zz_valyria_magic_dream_magic_spells 

zz_valyria_magic_dream_magic_spells.001 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.001.t
	desc = zz_valyria_magic_dream_magic_spells.001.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_dream_magic_spells.001.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL = zz_valyria_magic_dream_magic_01_mysteries_mental_domination
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.001.opt.b
		set_variable = { 
			name = zz_valyria_magic_dream_magic_spells001
			value = flag:religion_change
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL = zz_valyria_magic_dream_magic_01_mysteries_mental_domination
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.001.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.002 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.002.t
	desc = zz_valyria_magic_dream_magic_spells.002.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_traits
		remove_variable = selected_trait
		trait:lifestyle_blademaster = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = selected_trait }
					}
					set_variable = { name = selected_trait value = prev }
				}
			}
		}
		trait:lifestyle_mystic = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:lifestyle_reveler = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:lifestyle_hunter = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:lifestyle_physician = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:lifestyle_herbalist = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:lifestyle_gardener = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:knight_errant = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
	}

	widget = {
		is_shown = {
		}
		gui = "event_window_trait_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.002.opt.a
		var:selected_trait ?= {
			save_scope_as = trait 
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_02_mysteries_of_dreaming_destinies
		}
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.002.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.003 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.003.t
	desc = zz_valyria_magic_dream_magic_spells.003.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient


	option = {
		name = zz_valyria_magic_dream_magic_spells.003.opt.a
		set_variable = { 
			name = zz_valyria_magic_dream_magic_spells003
			value = flag:learning
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_03_mysteries_of_dreams
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.003.opt.b
		set_variable = { 
			name = zz_valyria_magic_dream_magic_spells003
			value = flag:diplomacy
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_03_mysteries_of_dreams
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.003.opt.c
		set_variable = { 
			name = zz_valyria_magic_dream_magic_spells003
			value = flag:stewardship
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_03_mysteries_of_dreams
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.003.opt.d
		set_variable = { 
			name = zz_valyria_magic_dream_magic_spells003
			value = flag:intrigue
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_03_mysteries_of_dreams
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.003.opt.e
		set_variable = { 
			name = zz_valyria_magic_dream_magic_spells003
			value = flag:martial
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_03_mysteries_of_dreams
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.003.opt.f
		set_variable = { 
			name = zz_valyria_magic_dream_magic_spells003
			value = flag:wanderer
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_03_mysteries_of_dreams
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.003.opt.g
		set_variable = { 
			name = zz_valyria_magic_dream_magic_spells003
			value = flag:leadership
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_03_mysteries_of_dreams
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.003.opt.h
		set_variable = { 
			name = zz_valyria_magic_dream_magic_spells003
			value = flag:prowess
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_03_mysteries_of_dreams
		}
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.003.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.004 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.004.t
	desc = zz_valyria_magic_dream_magic_spells.004.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_dream_magic_spells.004.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_04_mysteries_of_secrets
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.004.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.005 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.005.t
	desc = zz_valyria_magic_dream_magic_spells.005.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_traits
		remove_variable = selected_trait
		every_trait_in_category = {
			limit = { 
				NOR = {
					this = trait:dragon_aggressive 
					this = trait:dragon_friendly 
					this = trait:dragon_solitary 
					this = trait:dragon_cooperative 
					this = trait:dragon_imperious 
					this = trait:dragon_supporting 
					this = trait:dragon_impulsive 
					this = trait:dragon_calculating 
					this = trait:dragon_voracious 
					this = trait:dragon_restrained 
					this = trait:dragon_defiant 
					this = trait:dragon_accepting
					this = trait:dragon_bloodthirsty
					this = trait:dragon_skittish
					this = trait:dragon_skittish
				}
			}
			category = personality
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = selected_trait }
					}
					set_variable = { name = selected_trait value = prev }
				}
			}
		}
	}
	widget = {
		is_shown = {
		}
		gui = "event_window_trait_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.005.opt.a
		var:selected_trait ?= {
			save_scope_as = trait 
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_05_mysteries_of_personality_distortion
		}
	}
	
	option = {
		name = zz_valyria_magic_dream_magic_spells.005.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.006 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.006.t
	desc = zz_valyria_magic_dream_magic_spells.006.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_traits
		remove_variable = selected_trait
		trait:education_learning_1 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = selected_trait }
					}
					set_variable = { name = selected_trait value = prev }
				}
			}
		}
		trait:education_stewardship_1 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:education_diplomacy_1 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:education_intrigue_1 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:education_martial_1 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:education_martial_prowess_1 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
		trait:education_republican_knowledge_1 = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}

		
	}

	widget = {
		is_shown = {
		}
		gui = "event_window_trait_group_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.006.opt.a
		var:selected_trait ?= {
			save_scope_as = trait 
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_06_mysteries_of_education_reformation
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.006.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.007 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.007.t
	desc = zz_valyria_magic_dream_magic_spells.007.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_dream_magic_spells.007.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_07_mysteries_of_dreaming_fascination
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.007.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.008 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.008.t
	desc = zz_valyria_magic_dream_magic_spells.008.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_dream_magic_spells.008.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		save_scope_value_as = {
			name = option_01
			value = yes 
		} 
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_dream_magic_08_mysteries_of_murderous_dream
		}
	}
	option = {
		name = zz_valyria_magic_blood_magic_spells.008.opt.a
		trigger = {
			scope:recipient = {
				
			}
		}
		save_scope_value_as = {
			name = option_02
			value = yes 
		} 
		zz_valyria_magic_cast_effect = { 
			SKILL = blood_magic
			SPELL = zz_valyria_magic_dream_magic_08_mysteries_of_murderous_dream
		}
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.008.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.009 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.009.t
	desc = zz_valyria_magic_dream_magic_spells.009.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_dream_magic_spells.009.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_04_mysteries_of_secrets
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.009.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.010 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.010.t
	desc = zz_valyria_magic_dream_magic_spells.010.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_dream_magic_spells.010.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_10_mysteries_dreams_of_mystic_power
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.010.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.011 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.011.t
	desc = zz_valyria_magic_dream_magic_spells.011.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.011.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_11_mysteries_penetrative_insight
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.011.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.012 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.012.t
	desc = zz_valyria_magic_dream_magic_spells.012.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_targeting_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.012.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_12_mysteries_perceptive_insight
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.012.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.013 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.013.t
	desc = zz_valyria_magic_dream_magic_spells.013.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_secret
		remove_variable = selected_secret
		scope:recipient = {
			every_secret = {
				root = {
					add_to_variable_list = {
						name = possible_secret
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_secret }
						}
						set_variable = { name = selected_secret value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_secret_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.013.opt.a
		var:selected_secret = {
			save_scope_as = secret
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_13_mysteries_secret_penetration
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.013.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.014 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.014.t
	desc = zz_valyria_magic_dream_magic_spells.014.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_secret
		remove_variable = selected_secret
		scope:recipient = {
			every_targeting_secret = {
				root = {
					add_to_variable_list = {
						name = possible_secret
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_secret }
						}
						set_variable = { name = selected_secret value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_secret_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.014.opt.a
		var:selected_secret = {
			save_scope_as = secret
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_14_mysteries_secret_perception
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.014.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.015 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.015.t
	desc = zz_valyria_magic_dream_magic_spells.015.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_secret
		remove_variable = selected_secret
		scope:recipient = {
			every_known_secret = {
				root = {
					add_to_variable_list = {
						name = possible_secret
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_secret }
						}
						set_variable = { name = selected_secret value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_secret_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.015.opt.a
		var:selected_secret = {
			save_scope_as = secret
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_15_mysteries_hidden_discernment
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.015.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.016 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.016.t
	desc = zz_valyria_magic_dream_magic_spells.016.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_secret
		remove_variable = selected_secret
		scope:recipient = {
			every_secret = {
				root = {
					add_to_variable_list = {
						name = possible_secret
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_secret }
						}
						set_variable = { name = selected_secret value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_secret_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.016.opt.a
		var:selected_secret = {
			save_scope_as = secret
		}
		trigger_event = zz_valyria_magic_dream_magic_spells.01601
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.016.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.01601 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.016.t
	desc = zz_valyria_magic_dream_magic_spells.016.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list ?= possible_characters
		remove_variable = si_selected_character
		scope:secret = {
			every_secret_knower = {
				root = {
					add_to_variable_list = {
						name = possible_characters
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = si_selected_character }
						}
						set_variable = { name = si_selected_character value = prev }
					}
				}
			}
		}
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	

	option = {
		name = zz_valyria_magic_dream_magic_spells.016.opt.a
		var:si_selected_character = {
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_16_mysteries_secret_binding_own
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.016.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.017 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.017.t
	desc = zz_valyria_magic_dream_magic_spells.017.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_secret
		remove_variable = selected_secret
		scope:recipient = {
			every_targeting_secret = {
				root = {
					add_to_variable_list = {
						name = possible_secret
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_secret }
						}
						set_variable = { name = selected_secret value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_secret_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.017.opt.a
		var:selected_secret = {
			save_scope_as = secret
		}
		trigger_event = zz_valyria_magic_dream_magic_spells.01701
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.017.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.01701 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.017.t
	desc = zz_valyria_magic_dream_magic_spells.017.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list ?= possible_characters
		remove_variable = si_selected_character
		scope:secret = {
			every_secret_knower = {
				root = {
					add_to_variable_list = {
						name = possible_characters
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = si_selected_character }
						}
						set_variable = { name = si_selected_character value = prev }
					}
				}
			}
		}
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	

	option = {
		name = zz_valyria_magic_dream_magic_spells.017.opt.a
		var:si_selected_character = {
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_17_mysteries_secret_binding_targeted
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.017.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.018 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.018.t
	desc = zz_valyria_magic_dream_magic_spells.018.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_secret
		remove_variable = selected_secret
		scope:recipient = {
			every_known_secret = {
				root = {
					add_to_variable_list = {
						name = possible_secret
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_secret }
						}
						set_variable = { name = selected_secret value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_secret_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.018.opt.a
		var:selected_secret = {
			save_scope_as = secret
		}
		trigger_event = zz_valyria_magic_dream_magic_spells.01801
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.018.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.01801 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.018.t
	desc = zz_valyria_magic_dream_magic_spells.018.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list ?= possible_characters
		remove_variable = si_selected_character
		scope:secret = {
			every_secret_knower = {
				root = {
					add_to_variable_list = {
						name = possible_characters
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = si_selected_character }
						}
						set_variable = { name = si_selected_character value = prev }
					}
				}
			}
		}
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	

	option = {
		name = zz_valyria_magic_dream_magic_spells.018.opt.a
		var:si_selected_character = {
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_18_mysteries_secret_binding_known
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.018.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.019 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.019.t
	desc = zz_valyria_magic_dream_magic_spells.019.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_targeting_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.019.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_19_mysteries_breach_hostile_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.019.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.020 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.020.t
	desc = zz_valyria_magic_dream_magic_spells.020.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.020.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_20_mysteries_breach_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.020.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.021 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.020.t
	desc = zz_valyria_magic_dream_magic_spells.020.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_targeting_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.020.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_21_mysteries_empower_hostile_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.021.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.022 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.022.t
	desc = zz_valyria_magic_dream_magic_spells.022.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.022.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_22_mysteries_empower_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.022.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.023 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.023.t
	desc = zz_valyria_magic_dream_magic_spells.023.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_targeting_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.023.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		trigger_event = zz_valyria_magic_dream_magic_spells.02301
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.023.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.02301 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.023.t
	desc = zz_valyria_magic_dream_magic_spells.023.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list ?= possible_characters
		remove_variable = si_selected_character
		scope:scheme = {
			every_scheme_agent_character = {
				root = {
					add_to_variable_list = {
						name = possible_characters
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = si_selected_character }
						}
						set_variable = { name = si_selected_character value = prev }
					}
				}
			}
		}
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	

	option = {
		name = zz_valyria_magic_dream_magic_spells.023.opt.a
		var:si_selected_character = {
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_23_mysteries_manipulate_participation_of_hostile_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.023.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.024 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.024.t
	desc = zz_valyria_magic_dream_magic_spells.024.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.024.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		trigger_event = zz_valyria_magic_dream_magic_spells.02401
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.024.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.02401 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.024.t
	desc = zz_valyria_magic_dream_magic_spells.024.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list ?= possible_characters
		remove_variable = si_selected_character
		scope:scheme = {
			every_scheme_agent_character = {
				root = {
					add_to_variable_list = {
						name = possible_characters
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = si_selected_character }
						}
						set_variable = { name = si_selected_character value = prev }
					}
				}
			}
		}
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	

	option = {
		name = zz_valyria_magic_dream_magic_spells.024.opt.a
		var:si_selected_character = {
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_24_mysteries_manipulate_participation_of_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.024.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.025 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.025.t
	desc = zz_valyria_magic_dream_magic_spells.025.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_targeting_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.025.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		trigger_event = zz_valyria_magic_dream_magic_spells.02501
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.025.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.02501 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.025.t
	desc = zz_valyria_magic_dream_magic_spells.025.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list ?= possible_characters
		remove_variable = si_selected_character
		scope:scheme = {
			every_scheme_agent_character = {
				root = {
					add_to_variable_list = {
						name = possible_characters
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = si_selected_character }
						}
						set_variable = { name = si_selected_character value = prev }
					}
				}
			}
		}
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	

	option = {
		name = zz_valyria_magic_dream_magic_spells.025.opt.a
		var:si_selected_character = {
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_25_mysteries_reveal_participation_of_hostile_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.025.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.026 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.026.t
	desc = zz_valyria_magic_dream_magic_spells.026.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.026.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		trigger_event = zz_valyria_magic_dream_magic_spells.02601
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.026.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.02601 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.026.t
	desc = zz_valyria_magic_dream_magic_spells.026.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list ?= possible_characters
		remove_variable = si_selected_character
		scope:scheme = {
			every_scheme_agent_character = {
				root = {
					add_to_variable_list = {
						name = possible_characters
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = si_selected_character }
						}
						set_variable = { name = si_selected_character value = prev }
					}
				}
			}
		}
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_characters
					count > 0
				}
			}
		}
		gui = "event_window_character_selection_short"
		container = "custom_widgets_container"
	}
	

	option = {
		name = zz_valyria_magic_dream_magic_spells.026.opt.a
		var:si_selected_character = {
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_26_mysteries_reveal_participation_of_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.026.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.027 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.027.t
	desc = zz_valyria_magic_dream_magic_spells.027.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_targeting_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.027.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_27_mysteries_delay_hostile_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.027.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.028 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.028.t
	desc = zz_valyria_magic_dream_magic_spells.028.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.028.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_28_mysteries_delay_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.028.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.029 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.029.t
	desc = zz_valyria_magic_dream_magic_spells.029.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_targeting_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.029.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_29_mysteries_weaken_hostile_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.029.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.030 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.030.t
	desc = zz_valyria_magic_dream_magic_spells.030.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.030.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_30_mysteries_weaken_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.030.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.031 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.031.t
	desc = zz_valyria_magic_dream_magic_spells.031.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_targeting_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.031.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_31_mysteries_disrupt_hostile_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.031.opt.z
	}
}
zz_valyria_magic_dream_magic_spells.032 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_dream_magic_spells.032.t
	desc = zz_valyria_magic_dream_magic_spells.032.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient
	immediate = {
		clear_variable_list = possible_schemes
		remove_variable = selected_scheme
		scope:recipient = {
			every_scheme = {
				root = {
					add_to_variable_list = {
						name = possible_schemes
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_scheme }
						}
						set_variable = { name = selected_scheme value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_schemes_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_dream_magic_spells.032.opt.a
		var:selected_scheme = {
			save_scope_as = scheme
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = dream_magic
			SPELL  = zz_valyria_magic_dream_magic_32_mysteries_disrupt_schemes
		}	
	}
	option = {
		name = zz_valyria_magic_dream_magic_spells.032.opt.z
	}
}

namespace = zz_valyria_magic_alchemy_magic_spells 

zz_valyria_magic_alchemy_magic_spells.001 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.001.t
	desc = zz_valyria_magic_alchemy_magic_spells.001.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_provinces
		remove_variable = selected_province
		scope:recipient = {
			every_realm_province = {
				root = {
					add_to_variable_list = {
						name = possible_provinces
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_province }
						}
						set_variable = { name = selected_province value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_province_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.001.opt.a
		var:selected_province ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_01_mysteries_of_growth
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.001.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.002 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.002.t
	desc = zz_valyria_magic_alchemy_magic_spells.002.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_provinces
		remove_variable = selected_province
		scope:recipient = {
			every_realm_province = {
				root = {
					add_to_variable_list = {
						name = possible_provinces
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_province }
						}
						set_variable = { name = selected_province value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_province_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.002.opt.a
		var:selected_province ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_02_mysteries_of_construction
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.002.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.003 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.003.t
	desc = zz_valyria_magic_alchemy_magic_spells.003.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.003.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_03_mysteries_of_transmutation
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.003.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.004 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.004.t
	desc = zz_valyria_magic_alchemy_magic_spells.004.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.004.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_04_mysteries_of_arms
		}
		remove_short_term_gold = {
			gold = {
				value = 5000
			}
		}
	}

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.004.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.005 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.005.t
	desc = zz_valyria_magic_alchemy_magic_spells.005.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.005.opt.a
		set_variable = { 
			name = zz_valyria_magic_alchemy_magic_spells005
			value = flag:domain_limit
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_05_mysteries_of_realm_fortification
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.005.opt.b
		set_variable = { 
			name = zz_valyria_magic_alchemy_magic_spells005
			value = flag:vassal_limit
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_05_mysteries_of_realm_fortification
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.004.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.006 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.006.t
	desc = zz_valyria_magic_alchemy_magic_spells.006.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_artifacts
		remove_variable = selected_artifact
		scope:recipient = {
			every_character_artifact = {
				limit = {
					NOT = {
						has_variable = dragon_egg
					}
				}
				root = {
					add_to_variable_list = {
						name = possible_artifacts
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_artifact }
						}
						set_variable = { name = selected_artifact value = prev }
					}
				}
			}
		}

	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_artifact_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.006.opt.a
		trigger = {
		}
		var:selected_artifact ?= { 
			save_scope_as = target
		}
		trigger_event = zz_valyria_magic_alchemy_magic_spells.00601

	}
	
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.006.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.00601 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.006.t
	desc = zz_valyria_magic_alchemy_magic_spells.006.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		remove_variable = selected_trait
		clear_variable_list = possible_traits
		trait:zz_valyria_magic_none_modifier_01_stacking = {
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = selected_trait }
					}
					set_variable = { name = selected_trait value = prev }
				}
			}
		}
		every_trait = {
			limit = {
				has_trait_flag = zz_item_modifier
			}
			root = {
				add_to_variable_list = {
					name = possible_traits
					target = prev
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_trait_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.006.opt.a
		trigger = {
		}
		var:selected_trait ?= { 
			save_scope_as = modifier
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_06_mysteries_of_enchantment
		}
	}
}

zz_valyria_magic_alchemy_magic_spells.007 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.007.t
	desc = zz_valyria_magic_alchemy_magic_spells.007.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.007.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_07_mysteries_of_pious_transmutation
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.007.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.008 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.008.t
	desc = zz_valyria_magic_alchemy_magic_spells.008.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.008.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_08_mysteries_of_prestige_transmutation
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.008.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.009 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.009.t
	desc = zz_valyria_magic_alchemy_magic_spells.009.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.009.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_09_mysteries_of_renown_transmutation
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.009.opt.z
	}
}


zz_valyria_magic_alchemy_magic_spells.010 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.010.t
	desc = zz_valyria_magic_alchemy_magic_spells.010.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.010.opt.a
		save_scope_value_as = {
			name = option_01
			value = yes 
		} 
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_10_mysteries_of_age_manipulation_subtraction
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.010.opt.b
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_10_mysteries_of_age_manipulation_subtraction
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.010.opt.z
	}
}

zz_valyria_magic_alchemy_magic_spells.011 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.011.t
	desc = zz_valyria_magic_alchemy_magic_spells.011.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.011.opt.a
		save_scope_value_as = {
			name = option_01
			value = yes 
		} 
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_11_mysteries_of_age_manipulation_addition
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.011.opt.b
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_11_mysteries_of_age_manipulation_addition
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.011.opt.z
	}
}

zz_valyria_magic_alchemy_magic_spells.012 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.012.t
	desc = zz_valyria_magic_alchemy_magic_spells.012.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient


	option = {
		name = zz_valyria_magic_alchemy_magic_spells.012.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_12_mysteries_of_arms_efficiency
		}
		remove_short_term_gold = {
			gold = {
				value = 7500
			}
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.012.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.013 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.013.t
	desc = zz_valyria_magic_alchemy_magic_spells.013.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.013.opt.a

		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_13_mysteries_of_arms_additional_maa
		}
		remove_short_term_gold = {
			gold = {
				value = 2500
			}
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.013.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.014 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.014.t
	desc = zz_valyria_magic_alchemy_magic_spells.014.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.014.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_14_mysteries_of_arms_maa_size
		}
		remove_short_term_gold = {
			gold = {
				value = 10000
			}
		}
	}

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.014.opt.z
	}
}
zz_valyria_magic_alchemy_magic_spells.015 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.015.t
	desc = zz_valyria_magic_alchemy_magic_spells.015.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.015.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_15_mysteries_of_arms_additional_title_maa
		}
		remove_short_term_gold = {
			gold = {
				value = 2500
			}
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.015.opt.z
	}
}

zz_valyria_magic_alchemy_magic_spells.016 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_alchemy_magic_spells.016.t
	desc = zz_valyria_magic_alchemy_magic_spells.016.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_alchemy_magic_spells.016.opt.a
		zz_valyria_magic_cast_effect = { 
			SKILL = alchemy_magic
			SPELL  = zz_valyria_magic_alchemy_magic_16_mysteries_of_arms_title_maa_size
		}
		remove_short_term_gold = {
			gold = {
				value = 10000
			}
		}
	}
	option = {
		name = zz_valyria_magic_alchemy_magic_spells.016.opt.z
	}
}

namespace = zz_valyria_magic_fire_magic_spells 

zz_valyria_magic_fire_magic_spells.001 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_fire_magic_spells.001.t
	desc = zz_valyria_magic_fire_magic_spells.001.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_fire_magic_spells.001.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		set_variable = { 
			name = zz_valyria_magic_fire_magic_spells001
			value = flag:weaken_power
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = fire_magic
			SPELL  = zz_valyria_magic_fire_magic_01_mysteries_of_striking_flame
		}
	}
	option = {
		name = zz_valyria_magic_fire_magic_spells.001.opt.b
		trigger = {
			scope:recipient = {
				
			}
		}
		set_variable = { 
			name = zz_valyria_magic_fire_magic_spells001
			value = flag:max_power
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = fire_magic
			SPELL  = zz_valyria_magic_fire_magic_01_mysteries_of_striking_flame
		}
	}

	option = {
		name = zz_valyria_magic_fire_magic_spells.001.opt.z
	}
}

zz_valyria_magic_fire_magic_spells.002 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_fire_magic_spells.002.t
	desc = zz_valyria_magic_fire_magic_spells.002.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_armies
		remove_variable = selected_army
		scope:recipient = {
			every_army = {
				root = {
					add_to_variable_list = {
						name = possible_armies
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_army }
						}
						set_variable = { name = selected_army value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_army_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_fire_magic_spells.002.opt.a
		var:selected_army ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = fire_magic
			SPELL  = zz_valyria_magic_fire_magic_02_mysteries_of_the_blasting_flame
		}
	}
	option = {
		name = zz_valyria_magic_fire_magic_spells.002.opt.z
	}
}

zz_valyria_magic_fire_magic_spells.003 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_fire_magic_spells.003.t
	desc = zz_valyria_magic_fire_magic_spells.003.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_armies
		remove_variable = selected_army
		scope:recipient = {
			every_army = {
				root = {
					add_to_variable_list = {
						name = possible_armies
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_army }
						}
						set_variable = { name = selected_army value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_army_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_fire_magic_spells.003.opt.a
		var:selected_army ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = fire_magic
			SPELL  = zz_valyria_magic_fire_magic_02_mysteries_of_the_blasting_flame
		}
	}
	option = {
		name = zz_valyria_magic_fire_magic_spells.003.opt.z
	}
}
zz_valyria_magic_fire_magic_spells.004 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_fire_magic_spells.004.t
	desc = zz_valyria_magic_fire_magic_spells.004.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_fire_magic_spells.004.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = fire_magic
			SPELL  = zz_valyria_magic_fire_magic_04_mysteries_of_flaming_purification
		}
	}
	option = {
		name = zz_valyria_magic_fire_magic_spells.004.opt.z
	}
}
zz_valyria_magic_fire_magic_spells.005 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_fire_magic_spells.005.t
	desc = zz_valyria_magic_fire_magic_spells.005.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_fire_magic_spells.005.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = fire_magic
			SPELL  = zz_valyria_magic_fire_magic_05_mysteries_of_flaming_blades
		}
	}
	option = {
		name = zz_valyria_magic_fire_magic_spells.005.opt.z
	}
}

namespace = zz_valyria_magic_air_magic_spells 

zz_valyria_magic_air_magic_spells.001 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_air_magic_spells.001.t
	desc = zz_valyria_magic_air_magic_spells.001.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_air_magic_spells.001.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		set_variable = { 
			name = zz_valyria_magic_air_magic_spells001
			value = flag:weaken_power
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = fire_magic
			SPELL  = zz_valyria_magic_fire_magic_01_mysteries_of_striking_flame
		}
	}
	option = {
		name = zz_valyria_magic_air_magic_spells.001.opt.b
		trigger = {
			scope:recipient = {
				
			}
		}
		set_variable = { 
			name = zz_valyria_magic_air_magic_spells001
			value = flag:max_power
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = air_magic
			SPELL  = zz_valyria_magic_air_magic_01_mysteries_of_the_slicing_wind
		}
	}

	option = {
		name = zz_valyria_magic_air_magic_spells.001.opt.z
	}
}

zz_valyria_magic_air_magic_spells.002 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_air_magic_spells.002.t
	desc = zz_valyria_magic_air_magic_spells.002.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_regiments
		remove_variable = selected_regiment
		scope:recipient = {
			every_maa_regiment = {
				limit = {
					maa_current_troops_count > 0
				}
				root = {
					add_to_variable_list = {
						name = possible_regiments
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_regiment }
						}
						set_variable = { name = selected_regiment value = prev }
					}
				}
			}
		}
	}
	widget = {
		is_shown = {
			root = {
				any_in_list = {
					variable = possible_regiments
					count > 0
				}
			}
		}
		gui = "event_window_maa_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_air_magic_spells.002.opt.a
		trigger = {
			scope:recipient = {
			}

		}
		var:selected_regiment ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = air_magic
			SPELL  = zz_valyria_magic_air_magic_02_mysteries_of_the_tempestuous_winds
		}	
	}
	option = {
		name = zz_valyria_magic_air_magic_spells.002.opt.z
	}
}

zz_valyria_magic_air_magic_spells.003 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_air_magic_spells.003.t
	desc = zz_valyria_magic_air_magic_spells.003.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_air_magic_spells.003.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = air_magic
			SPELL  = zz_valyria_magic_air_magic_03_mysteries_of_the_wall_of_the_wind
		}
	}
	option = {
		name = zz_valyria_magic_air_magic_spells.003.opt.z
	}
}

zz_valyria_magic_air_magic_spells.004 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_air_magic_spells.004.t
	desc = zz_valyria_magic_air_magic_spells.004.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_provinces
		remove_variable = selected_province
		scope:recipient = {
			every_realm_province = {
				root = {
					add_to_variable_list = {
						name = possible_provinces
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_province }
						}
						set_variable = { name = selected_province value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_province_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_air_magic_spells.004.opt.a
		var:selected_province ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = air_magic
			SPELL  = zz_valyria_magic_air_magic_04_mysteries_of_the_hurricane
		}	
	}
	option = {
		name = zz_valyria_magic_air_magic_spells.004.opt.z
	}
}

zz_valyria_magic_air_magic_spells.005 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_air_magic_spells.005.t
	desc = zz_valyria_magic_air_magic_spells.005.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_air_magic_spells.005.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = air_magic
			SPELL  = zz_valyria_magic_air_magic_05_mysteries_of_initiative
		}
	}
	option = {
		name = zz_valyria_magic_air_magic_spells.005.opt.z
	}
}

namespace = zz_valyria_magic_water_magic_spells 

zz_valyria_magic_water_magic_spells.001 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_water_magic_spells.001.t
	desc = zz_valyria_magic_water_magic_spells.001.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_water_magic_spells.001.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		set_variable = { 
			name = zz_valyria_magic_water_magic_spells001
			value = flag:weaken_power
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = fire_magic
			SPELL  = zz_valyria_magic_fire_magic_01_mysteries_of_striking_flame
		}
	}
	option = {
		name = zz_valyria_magic_water_magic_spells.001.opt.b
		trigger = {
			scope:recipient = {
				
			}
		}
		set_variable = { 
			name = zz_valyria_magic_water_magic_spells001
			value = flag:max_power
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = air_magic
			SPELL  = zz_valyria_magic_water_magic_01_mysteries_of_the_crushing_waters
		}
	}

	option = {
		name = zz_valyria_magic_water_magic_spells.001.opt.z
	}
}

zz_valyria_magic_water_magic_spells.002 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_water_magic_spells.002.t
	desc = zz_valyria_magic_water_magic_spells.002.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_armies
		remove_variable = selected_army
		scope:recipient = {
			every_army = {
				root = {
					add_to_variable_list = {
						name = possible_armies
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_army }
						}
						set_variable = { name = selected_army value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_army_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_water_magic_spells.002.opt.a
		var:selected_army ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = water_magic
			SPELL  = zz_valyria_magic_water_magic_02_mysteries_of_the_surging_torrent
		}	
	}
	option = {
		name = zz_valyria_magic_water_magic_spells.002.opt.z
	}
}

zz_valyria_magic_water_magic_spells.003 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_water_magic_spells.003.t
	desc = zz_valyria_magic_water_magic_spells.003.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_armies
		remove_variable = selected_army
		scope:recipient = {
			every_army = {
				root = {
					add_to_variable_list = {
						name = possible_armies
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_army }
						}
						set_variable = { name = selected_army value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_army_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_water_magic_spells.003.opt.a
		var:selected_army ?= { 
			save_scope_as = target
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = water_magic
			SPELL  = zz_valyria_magic_water_magic_03_mysteries_of_endurance
		}
	}
	option = {
		name = zz_valyria_magic_water_magic_spells.003.opt.z
	}
}


zz_valyria_magic_water_magic_spells.004 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_water_magic_spells.004.t
	desc = zz_valyria_magic_water_magic_spells.004.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_epidemics
		remove_variable = selected_epidemic
		every_epidemic_type = {
			root = {
				add_to_variable_list = {
					name = possible_epidemics
					target = prev
				}
				if = {
					limit = {
						NOT = { has_variable = selected_epidemic }
					}
					set_variable = { name = selected_epidemic value = prev }
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_epidemic_selection"
		container = "custom_widgets_container"
	}
	option = {
		name = zz_valyria_magic_water_magic_spells.004.opt.e
		trigger = {
			scope:recipient = {			
			}
		}
		var:selected_epidemic ?= { 
			save_scope_as = epidemic
		}
		trigger_event = zz_valyria_magic_water_magic_spells.00401
	}


	
	option = {
		name = zz_valyria_magic_water_magic_spells.004.opt.z
	}
}


zz_valyria_magic_water_magic_spells.00401 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_water_magic_spells.004.t
	desc = zz_valyria_magic_water_magic_spells.004.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	immediate = {
		clear_variable_list = possible_provinces
		remove_variable = selected_province
		scope:recipient = {
			every_realm_province = {
				root = {
					add_to_variable_list = {
						name = possible_provinces
						target = prev
					}
					if = {
						limit = {
							NOT = { has_variable = selected_province }
						}
						set_variable = { name = selected_province value = prev }
					}
				}
			}
		}
	}

	widget = {
		is_shown = {
			is_ai = no
		}
		gui = "event_window_province_selection"
		container = "custom_widgets_container"
	}

	option = {
		name = zz_valyria_magic_water_magic_spells.004.opt.a
		trigger = {
			scope:recipient = {			
			}
			scope:secondary_recipient = {
				zz_valyria_has_mana_to_cast = {
					MANACOST = 25
				}
			}
		}
		var:selected_province ?= { 
			save_scope_as = target
		}
		set_variable = { 
			name = zz_valyria_magic_water_magic_spells004a
			value = flag:minor
			days = 1
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = water_magic
			SPELL  = zz_valyria_magic_water_magic_04_mysteries_of_rhoyne
		}
	}
	option = {
		name = zz_valyria_magic_water_magic_spells.004.opt.b
		trigger = {
			scope:recipient = {			
			}
			scope:secondary_recipient = {
				zz_valyria_has_mana_to_cast = {
					MANACOST = 50
				}
			}
		}
		var:selected_province ?= { 
			save_scope_as = target
		}
		set_variable = { 
			name = zz_valyria_magic_water_magic_spells004
			value = flag:major
			days = 1
		}
		scope:secondary_recipient = {
			set_variable = {
				name = zz_manacost 
				value = 25
			}
			zz_valyria_mana_spend = yes
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = water_magic
			SPELL  = zz_valyria_magic_water_magic_04_mysteries_of_rhoyne
		}
	}
	option = {
		name = zz_valyria_magic_water_magic_spells.004.opt.c
		trigger = {
			scope:recipient = {			
			}
			scope:secondary_recipient = {
				zz_valyria_has_mana_to_cast = {
					MANACOST = 100
				}
			}
		}
		var:selected_province ?= { 
			save_scope_as = target
		}
		set_variable = { 
			name = zz_valyria_magic_water_magic_spells004
			value = flag:apocalypse
			days = 1
		}
		scope:secondary_recipient = {
			set_variable = {
				name = zz_manacost 
				value = 75
			}
			zz_valyria_mana_spend = yes
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = water_magic
			SPELL  = zz_valyria_magic_water_magic_04_mysteries_of_rhoyne
		}
	}
}

zz_valyria_magic_water_magic_spells.005 = {
	type = character_event
	window = zz_valyria_magic_character_event
	title = zz_valyria_magic_water_magic_spells.005.t
	desc = zz_valyria_magic_water_magic_spells.005.desc
	theme = dragon
	left_portrait = root
	right_portrait = scope:recipient

	option = {
		name = zz_valyria_magic_water_magic_spells.005.opt.a
		trigger = {
			scope:recipient = {			
			}
		}
		zz_valyria_magic_cast_effect = { 
			SKILL = air_magic
			SPELL  = zz_valyria_magic_water_magic_05_mysteries_of_winter
		}
	}
	option = {
		name = zz_valyria_magic_water_magic_spells.005.opt.z
	}
}